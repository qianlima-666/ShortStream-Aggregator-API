# 更新日志（CHANGELOG）

## [Unreleased]
- 待添加

## [v4.2.0] - 2025-11-28
- 新增
  - 下载接口支持 Bilibili 音视频自动合并，保障下载视频带声音
  - 为关键路径增加统一指标日志（耗时、文件大小）
  - 并发速率限制中间件与 CORS 白名单配置
  - 新增 `/health` 健康检查端点与单元测试

- 更改
  - 容器健康检查改为探测 `/health`

- 性能与稳定性
  - FFmpeg 合并改为异步子进程并发限制
  - 流式下载优化连接池、超时与分块大小（64KB），完善断连与异常清理
  - 爬虫统一引入连接池 keepalive 与并发信号量限流

- 安全
  - 下载路径与文件名清理和校验，防止路径穿越与非法字符

- 配置
  - 统一从配置文件 `config.yaml` 读取运行参数；默认端口 `3000`

- 工程化
  - 引入 `pytest` 与覆盖率配置；集成 `ruff/black/isort` 与 `pre-commit`
  - 迁移至 `pyproject.toml` 管理依赖并锁定关键版本

- 容器与运行
  - `Dockerfile` 多阶段构建，添加非 root 用户与健康检查；优先运行字节码

